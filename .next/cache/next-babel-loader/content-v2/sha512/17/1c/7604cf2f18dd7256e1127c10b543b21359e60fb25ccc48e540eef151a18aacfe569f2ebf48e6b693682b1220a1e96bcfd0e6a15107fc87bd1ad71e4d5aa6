{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Layout from \"../../../component/Layout\";\nimport React, { useState } from \"react\";\nimport { Header, Button, Form, Input, Message } from \"semantic-ui-react\";\nimport web3 from \"../../../etherium/web3\";\nimport { Router, Link } from \"../../../routes\";\nimport Campaign from \"../../../etherium/Campaign\";\nimport MessageLoader from \"../../../component/MessageLoader\";\n\nconst newrequests = props => {\n  const {\n    0: formData,\n    1: setFormData\n  } = useState({\n    description: \"\",\n    value: \"\",\n    address: \"\"\n  });\n  const {\n    0: data,\n    1: setData\n  } = useState(\"\");\n  const {\n    0: load,\n    1: setLoad\n  } = useState(false);\n\n  const handleChange = e => {\n    const {\n      value,\n      name\n    } = e.target;\n\n    switch (name) {\n      case \"description\":\n        setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n          description: value\n        }));\n        break;\n\n      case \"value\":\n        setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n          value: value\n        }));\n        break;\n\n      case \"address\":\n        setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n          address: value\n        }));\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const onSubmit = async () => {\n    const campaign = Campaign(props.address);\n\n    try {\n      setLoad(true);\n      setData(\"\");\n      const accounts = await web3.eth.getAccounts();\n      const result = await campaign.methods.createRequests(formData.description, formData.value, formData.address).send({\n        from: accounts[0]\n      });\n      Router.pushRoute(`/campaigns/${props.address}/requests`);\n      setLoad(false);\n    } catch (error) {\n      setLoad(false);\n      setData(error.message);\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(Layout, {\n    children: [/*#__PURE__*/_jsx(Header, {\n      as: \"h3\",\n      children: \"Create a Request\"\n    }), /*#__PURE__*/_jsx(Link, {\n      to: `/campaigns/${props.address}/requests`,\n      children: /*#__PURE__*/_jsxs(\"a\", {\n        children: [\" \", /*#__PURE__*/_jsx(Button, {\n          primary: true,\n          children: \"Back\"\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(Form, {\n      error: !!data,\n      children: [/*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Description\"\n        }), /*#__PURE__*/_jsx(Input, {\n          label: \"Wei\",\n          labelPosition: \"right\",\n          onChange: e => handleChange(e),\n          value: formData.description,\n          name: \"description\"\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Value \"\n        }), /*#__PURE__*/_jsx(Input, {\n          onChange: e => handleChange(e),\n          value: formData.value,\n          name: \"value\"\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Recipeint \"\n        }), /*#__PURE__*/_jsx(Input, {\n          onChange: e => handleChange(e),\n          value: formData.address,\n          name: \"address\"\n        })]\n      }), /*#__PURE__*/_jsx(Message, {\n        error: true,\n        content: data,\n        header: \"OOPS!\"\n      }), /*#__PURE__*/_jsx(Button, {\n        loading: load,\n        onClick: onSubmit,\n        primary: true,\n        children: \"Create\"\n      })]\n    }), load && /*#__PURE__*/_jsx(MessageLoader, {})]\n  });\n};\n\nnewrequests.getInitialProps = async props => {\n  const address = props.query.address;\n  return {\n    address\n  };\n};\n\nexport default newrequests;","map":null,"metadata":{},"sourceType":"module"}