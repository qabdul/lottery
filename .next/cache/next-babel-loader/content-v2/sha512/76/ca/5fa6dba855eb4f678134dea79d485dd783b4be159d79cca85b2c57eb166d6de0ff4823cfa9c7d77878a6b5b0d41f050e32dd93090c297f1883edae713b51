{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from \"react\";\nimport { Header, Button, Form, Input, Message, Icon, Grid } from \"semantic-ui-react\";\nimport Campaign from \"../etherium/Campaign\";\nimport web3 from \"../etherium/web3\";\nimport { Router } from \"../routes\";\nimport MessageLoader from \"./MessageLoader\";\n\nconst Contribute = props => {\n  const {\n    0: formData,\n    1: setFormData\n  } = useState(\"\");\n  const {\n    0: data,\n    1: setData\n  } = useState(\"\");\n  const {\n    0: load,\n    1: setLoad\n  } = useState(false);\n  const campaign = Campaign(props.address);\n\n  const handleChange = e => {\n    setFormData(e.target.value);\n  };\n\n  const onSubmit = async () => {\n    if (formData === \" \" || formData === null) {\n      console.log(formData);\n      setData(\"Enter minimum value\");\n    } else if (Number(props.minimumContribution) > Number(formData)) {\n      console.log(formData);\n      setData(\"Enter minimum value\");\n    } else if (Number(formData) > Number(props.minimumContribution)) {\n      console.log(formData);\n\n      try {\n        setLoad(true);\n        setData(\"\");\n        const accounts = await web3.eth.getAccounts();\n        const result = await campaign.methods.contribute().send({\n          from: accounts[0],\n          value: formData\n        });\n        Router.replaceRoute(`/campaigns/${props.address}`);\n        setLoad(false);\n      } catch (error) {\n        setLoad(false);\n        setData(error.message);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(Grid, {\n      children: [/*#__PURE__*/_jsx(Grid.Row, {\n        children: /*#__PURE__*/_jsx(Grid.Column, {\n          children: /*#__PURE__*/_jsxs(Form, {\n            error: !!data,\n            children: [/*#__PURE__*/_jsxs(Form.Field, {\n              children: [/*#__PURE__*/_jsx(\"label\", {\n                children: \"Contribute to this Campaign\"\n              }), /*#__PURE__*/_jsx(Input, {\n                label: \"wei\",\n                labelPosition: \"right\",\n                onChange: e => handleChange(e),\n                value: formData,\n                type: \"number\"\n              })]\n            }), /*#__PURE__*/_jsx(Message, {\n              error: true,\n              content: data,\n              header: \"OOPS!\"\n            }), /*#__PURE__*/_jsx(Button, {\n              floated: \"right\",\n              loading: load,\n              onClick: onSubmit,\n              primary: true,\n              children: \"Contribute!\"\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(Grid.Row, {\n        children: load && /*#__PURE__*/_jsx(MessageLoader, {})\n      })]\n    })\n  });\n};\n\nexport default Contribute;","map":null,"metadata":{},"sourceType":"module"}