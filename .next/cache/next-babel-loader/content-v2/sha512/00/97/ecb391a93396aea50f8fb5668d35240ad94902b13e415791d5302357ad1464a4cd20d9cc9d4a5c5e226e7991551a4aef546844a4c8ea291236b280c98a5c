{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from \"react\";\nimport Layout from \"../../../component/Layout\";\nimport NoDataFound from \"../../../component/NoDataFound\";\nimport { Button, Table, Grid, Message } from \"semantic-ui-react\";\nimport { Link } from \"../../../routes\";\nimport web3 from \"../../../etherium/web3\";\nimport Campaign from \"../../../etherium/Campaign\";\nimport RequestRow from \"../../../component/RequestRow\";\nimport ErrorMessage from \"../../../component/ErrorMessage\";\n\nconst index = props => {\n  const {\n    Header,\n    Body,\n    HeaderCell,\n    Cell,\n    Row\n  } = Table;\n  const {\n    0: data,\n    1: setData\n  } = useState(\"\");\n\n  const setError = error => {\n    setData(error);\n  };\n\n  const renderRows = () => {\n    return props.requests.map((request, index) => {\n      return /*#__PURE__*/_jsx(RequestRow, {\n        request: request,\n        address: props.address,\n        id: index,\n        total: props.totalApprovers,\n        setError: setError\n      }, index);\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(Layout, {\n    children: [/*#__PURE__*/_jsx(\"h3\", {\n      children: \"All the Request Created for this Campaign\"\n    }), /*#__PURE__*/_jsxs(Grid, {\n      children: [/*#__PURE__*/_jsx(Grid.Row, {\n        children: /*#__PURE__*/_jsxs(Grid.Column, {\n          children: [/*#__PURE__*/_jsx(Link, {\n            to: `/campaigns/${props.address}`,\n            children: /*#__PURE__*/_jsxs(\"a\", {\n              children: [\" \", /*#__PURE__*/_jsx(Button, {\n                primary: true,\n                floated: \"left\",\n                children: \"Back\"\n              })]\n            })\n          }), \" \", /*#__PURE__*/_jsx(Link, {\n            to: `/campaigns/${props.address}/requests/new`,\n            children: /*#__PURE__*/_jsxs(\"a\", {\n              children: [\" \", /*#__PURE__*/_jsx(Button, {\n                primary: true,\n                floated: \"right\",\n                children: \"Create Request\"\n              })]\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Grid.Row, {\n        children: /*#__PURE__*/_jsxs(Grid.Column, {\n          children: [/*#__PURE__*/_jsxs(Table, {\n            children: [/*#__PURE__*/_jsx(Header, {\n              children: /*#__PURE__*/_jsxs(Row, {\n                children: [/*#__PURE__*/_jsx(HeaderCell, {\n                  children: \"ID\"\n                }), /*#__PURE__*/_jsx(HeaderCell, {\n                  children: \"Description\"\n                }), /*#__PURE__*/_jsx(HeaderCell, {\n                  children: \"Amount\"\n                }), /*#__PURE__*/_jsx(HeaderCell, {\n                  children: \"Recepient\"\n                }), /*#__PURE__*/_jsx(HeaderCell, {\n                  children: \"Approval Count\"\n                }), /*#__PURE__*/_jsx(HeaderCell, {\n                  children: \"Approve\"\n                }), /*#__PURE__*/_jsx(HeaderCell, {\n                  children: \"Finalize\"\n                })]\n              })\n            }), /*#__PURE__*/_jsx(Table.Body, {\n              children: renderRows()\n            })]\n          }), props.requests.length === 0 ? /*#__PURE__*/_jsx(NoDataFound, {\n            message: \"Not Data Found, Please click on create Request button to create new one\"\n          }) : \"\", data === \"\" ? \"\" : /*#__PURE__*/_jsx(ErrorMessage, {\n            data: data\n          })]\n        })\n      })]\n    })]\n  });\n};\n\nindex.getInitialProps = async props => {\n  const address = props.query.address;\n  const campaign = Campaign(props.query.address);\n  const requestsCount = await campaign.methods.getRequestsCount().call();\n  const totalApprovers = await campaign.methods.approversCount().call();\n  const requests = await Promise.all(Array(parseInt(requestsCount)).fill().map((element, index) => {\n    return campaign.methods.requests(index).call();\n  }));\n  console.log(requests);\n  return {\n    address,\n    requests,\n    requestsCount,\n    totalApprovers\n  };\n};\n\nexport default index;","map":null,"metadata":{},"sourceType":"module"}