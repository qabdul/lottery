{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { on } from \"mocha/lib/runner\";\nimport React, { useState } from \"react\";\nimport { Header, Button, Form, Input, Message, Segment, Progress, Icon } from \"semantic-ui-react\";\nimport Layout from \"../../component/Layout\";\nimport MessageLoader from \"../../component/MessageLoader\";\nimport CampaignFactory from \"../../etherium/CampaignFactory\";\nimport web3 from \"../../etherium/web3\";\nimport { Link, Router } from \"../../routes\";\n\nconst newcampaign = () => {\n  const {\n    0: value,\n    1: setValue\n  } = useState();\n  const {\n    0: data,\n    1: setData\n  } = useState(\"\");\n  const {\n    0: load,\n    1: setLoad\n  } = useState(false);\n\n  const handleChange = e => {\n    const {\n      value\n    } = e.target;\n\n    if (!isNaN(value)) {\n      console.log(value);\n      setValue(value);\n    }\n  };\n\n  const onSubmit = async () => {\n    try {\n      setLoad(true);\n      setData(\"\");\n      const accounts = await web3.eth.getAccounts();\n      const result = await CampaignFactory.methods.createCampaign(value).send({\n        from: accounts[0]\n      });\n      Router.pushRoute(\"/\");\n      setLoad(false);\n    } catch (error) {\n      setLoad(false);\n      setData(error.message);\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(Layout, {\n    children: [/*#__PURE__*/_jsx(Header, {\n      as: \"h3\",\n      children: \"Create a Campaign\"\n    }), /*#__PURE__*/_jsxs(Form, {\n      error: !!data,\n      children: [/*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Minimum Contribution\"\n        }), /*#__PURE__*/_jsx(Input, {\n          type: \"number\",\n          label: \"Wei\",\n          labelPosition: \"right\",\n          onChange: e => handleChange(e),\n          value: value\n        })]\n      }), /*#__PURE__*/_jsxs(Message, {\n        error: true,\n        content: data,\n        icon: true,\n        header: \"OOPS!\",\n        children: [/*#__PURE__*/_jsx(Icon, {\n          name: \"exclamation triangle\"\n        }), /*#__PURE__*/_jsxs(Message.Content, {\n          children: [/*#__PURE__*/_jsx(Message.Header, {\n            children: \"OOPS!!\"\n          }), data]\n        })]\n      }), /*#__PURE__*/_jsx(Button, {\n        loading: load,\n        onClick: onSubmit,\n        primary: true,\n        children: \"Create\"\n      })]\n    }), load && /*#__PURE__*/_jsx(MessageLoader, {})]\n  });\n};\n\nexport default newcampaign;","map":null,"metadata":{},"sourceType":"module"}